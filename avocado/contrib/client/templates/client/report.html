{% extends "base_nav.html" %}

{% block title %}{{ block.super }} : Report{% endblock %}

{% block styles %}
    {{ block.super }}
    <link rel="stylesheet" href="{{ CLIENT_MEDIA_URL }}css/report.css">
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script>require(['extensions', 'report/main']);</script>
{% endblock %}

{% block navigation %}
    <li>&larr; <a href="{% url define %}">Refine Conditions</a></li>
{% endblock %}

{% block content %}
    
    <div id="report" class="container" data-uri="{% url api:reports:session:resolve %}">

        <div class="title">
            Report
            <button id="resize">Resize</button>
        </div>

        <div class="toolbar header">
            <span><span class="count"></span> / <span class="unique-count"></span></span>
            <span class="page-links"></span>
            Per page:
            <select class="per-page">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
            <button id="search-button">Show/Hide Columns</button>
        </div>

        <div class="content">
            <table id="table" class="sortable">
                <thead><tr></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="toolbar footer">
            <span><span class="count"></span> / <span class="unique-count"></span></span>
            <span class="page-links"></span>
            Per page:
            <select class="per-page">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>

    <div id="search-dialog" data-uri="{% url api:perspectives:session %}">
        <div>
            <h3>Available Columns</h3>

            <p class="ht mg">Below are the columns of data that are available for
            viewing. Note that depending on which columns are added to your report,
            the the <em>number of rows</em> may change, but the <em>number of
            patients</em> will stay constant.</p>

            <form method="get" action="{% url api:columns:read %}">
                <input id="search" class="search" type="input" name="q" placeholder="Search...">
            </form>

            <div id="columns"></div>
        </div>

        <div>
            <h3>Your Columns</h3>

            <p class="ht mg">The order below (top-bottom) defines the order they will be
            displayed (left-right). To change the order simply click and drag any of the
            columns to the desired location and release in the visible drop zone.</p>

            <ul id="active-columns"></ul>
        </div>
    </div>

{% endblock %}
